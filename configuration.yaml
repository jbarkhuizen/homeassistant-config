
# Loads default set of integrations. Do not remove.
default_config:
#_------------------------------------------------------------------------------------------------------------------------------------------------
# Load frontend themes from the themes folder
frontend:
  themes: !include_dir_merge_named themes
# Added code as suggested by Copilot
  extra_module_url:
    - /hacsfiles/kiosk-mode/kiosk-mode.js    
#------------------------------------------------------------------------------------------------------------------------------------------------  
# Text to speech default config
tts:
  - platform: google_translate  
#------------------------------------------------------------------------------------------------------------------------------------------------  
shell_command:
  export_sensor_list: >
    bash -c "hass-cli entity list | grep ^sensor. > /config/sensor_list.txt"
#------------------------------------------------------------------------------------------------------------------------------------------------  
http:
  cors_allowed_origins:
    - "http://localhost"
    - "http://127.0.0.1"
    - "http://192.168.1.61"
  use_x_frame_options: false    
#------------------------------------------------------------------------------------------------------------------------------------------------  
automation: !include automations.yaml
script: !include scripts.yaml
scene: !include scenes.yaml
#input_select: !include select.yaml
template: !include template.yaml    #we include template file here, soon replaced by packages folder
 #template: !include template_MasterSlave_System.yaml  #change the config file depending on your system
#------------------------------------------------------------------------------------------------------------------------------------------------  
#The homeassistant packages will become the standard of loading configs going forward
#be sure to add the packages folder and the 2 lines
homeassistant:
  packages: !include_dir_named packages
  customize: !include customize.yaml
#------------------------------------------------------------------------------------------------------------------------------------------------  
# Telegram Bot config now in packages/telegram.yaml

# The sensor below keeps the minimum soc of the battery for the last 12 hours,
#only removed from DeyeSolarDesktop, not important
# sensor:
#   - platform: statistics
#     name: "min_soc_battery"
#     entity_id: sensor.deyeinverter_battery_soc
#     state_characteristic: value_min
#     max_age:
#       hours: 12
#     sampling_size: 144
#------------------------------------------------------------------------------------------------------------------------------------------------  
#------------------------------------------------------------------------------------------------------------------------------------------------      
logger:
  default: info
  logs:
    homeassistant.components.smtp: debug
    homeassistant.components.notify: debug
    homeassistant.components.automation: info
#------------------------------------------------------------------------------------------------------------------------------------------------  
# Network Integration Settings
# Input Helpers for Configuration
# Added by Claude.AI on 30 July 2025
input_boolean:
  network_monitoring_enabled:
    name: "Network Monitoring Enabled"
    initial: true
    icon: mdi:network    
    
#------------------------------------------------------------------------------------------------------------------------------------------------      
# Ypdated to reduce Sonoff & Tuya Battery consumption
# Added by Claude.AI on 5 Aug 2025
recorder:
  exclude:
    entity_globs:
      - sensor.*_rssi           # Signal strength updates too frequently
      - sensor.*_link_rate      # Network stats not needed for batteries
      - sensor.*_signal_strength # Disable frequent signal updates
    entities:
      # Exclude specific high-frequency entities
      - sensor.sonoff_a4800986dd_rssi
      - sensor.sonoff_a48008e4cc_rssi
      - sensor.sonoff_1002357619_rssi
  
  # Only record essential battery data
  include:
    entities:
      - sensor.sonoff_a4800986dd_battery
      - sensor.sonoff_a4800986dd_temperature  # Keep temp for history
      - sensor.sonoff_a4800986dd_humidity     # Keep humidity for history
      - sensor.sonoff_a48008e4cc_battery
      - sensor.study_temperature_humidity_sensor_battery
#------------------------------------------------------------------------------------------------------------------------------------------------      
# Device Tracker for Network Devices
# Added by Claude.AI on 30 July 202
device_tracker:
  - platform: nmap_tracker
    hosts: 192.168.1.1/24
    home_interval: 5
    consider_home: 600
    scan_options: "-F --host-timeout 5s"
    exclude:
      - 192.168.1.1   # MetroFibre Router
      - 192.168.1.90  # Home Assistant
#      - 192.168.1.3   # TP-Link EAP245
#      - 192.168.1.4   # Netgear Genie
#      - 192.168.1.5   # TP-Link Archer D2
#      - 192.168.1.8   # TP-Link EAP225 Outdoor
#      - 192.168.1.9   # Netgear GS728TP
    track_new_devices: true
#------------------------------------------------------------------------------------------------------------------------------------------------            

