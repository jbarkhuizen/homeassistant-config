#================================================================================
# ENERGY MONITORING PACKAGE - CORRECTED YAML STRUCTURE
# Fixed YAML indentation issue
# Updated by Claude.ai on 05 August 2025
#================================================================================

#--------------------------------------------------------------------------------
# INPUT HELPERS FOR ENERGY CALCULATIONS
#--------------------------------------------------------------------------------
input_number:  # ← THIS PARENT KEY IS REQUIRED
  electricity_rate:
    name: "Electricity Rate (R per kWh)"
    min: 0
    max: 10
    step: 0.01
    initial: 4.09
    unit_of_measurement: "R/kWh"
    icon: mdi:currency-usd

  daily_connection_fee:
    name: "Daily Connection Fee"
    min: 0
    max: 50
    step: 0.01
    initial: 0.00
    unit_of_measurement: "R"
    icon: mdi:currency-usd

#--------------------------------------------------------------------------------
# ENERGY SENSOR ALIASES - Creates missing sensor.energy_daily
#--------------------------------------------------------------------------------
template:
  - sensor:
    - name: "Energy Daily"
      state: "{{ states('sensor.efergy_daily_consumption') }}"
      unit_of_measurement: "kWh"
      device_class: energy
      state_class: total_increasing
      icon: mdi:flash

    - name: "Energy Monthly"
      state: "{{ states('sensor.efergy_monthly_consumption') }}"
      unit_of_measurement: "kWh"
      device_class: energy
      state_class: total_increasing
      icon: mdi:flash

    - name: "Energy Yearly"
      state: "{{ states('sensor.efergy_yearly_consumption') }}"
      unit_of_measurement: "kWh"
      device_class: energy
      state_class: total_increasing
      icon: mdi:flash

    - name: "Current Power Usage kW"
      state: >
        {{ (states('sensor.efergy_power_usage') | float / 1000) | round(3) }}
      unit_of_measurement: "kW"
      device_class: power
      icon: mdi:flash