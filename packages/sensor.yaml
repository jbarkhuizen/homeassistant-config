sensor:
# Below Sensors is applicable to the Sunsynk Inverters
  - platform: integration
    name: deyeinvertermaster_summary_total_battery_charge_grid
    source: sensor.deyeinvertermaster_battery_charge_grid_power
    method: left

  - platform: integration
    name: deyeinverterslave_summary_total_battery_charge_grid
    source: sensor.deyeinverterslave_battery_charge_grid_power
    method: left
#------------------------------------------------------------------------------------------------------------------------    
#Github Integration
#Depreciated - Integration via Services
#  - platform: github
#    access_token: !secret github_token
#    repositories: 
#      - path: "jbarkhuizen/Home_Assistant_v1"
#        name: Barkie Home Assistant V1
#------------------------------------------------------------------------------------------------------------------------            
# Below Sensore added to enable power Sensors to track Energy
# added 10 July 2025 @12h50
# Code Link 1.1 in template.yaml
  - platform: integration
    source: sensor.plugs_2_power
    name: Plugs 2 Energy
    unit_prefix: k
    round: 2
    method: trapezoidal

  - platform: integration
    source: sensor.plugs_1_power
    name: Plugs 1 Energy
    unit_prefix: k
    round: 2
    method: trapezoidal

  - platform: integration
    source: sensor.plugs_2_power
    name: Plugs 2 Energy
    unit_prefix: k
    round: 2
    method: trapezoidal

  - platform: integration
    source: sensor.woonstel_power
    name: Woonstel Energy
    unit_prefix: k
    round: 2
    method: trapezoidal

  - platform: integration
    source: sensor.geyser_new_power
    name: Geyser New Energy
    unit_prefix: k
    round: 2
    method: trapezoidal

  - platform: integration
    source: sensor.geyser_external_power
    name: Geyser External Energy
    unit_prefix: k
    round: 2
    method: trapezoidal

  - platform: integration
    source: sensor.sonoff_10009ce3f9_energy
    name: Pool Pump Energy
    unit_prefix: k
    round: 2
    method: trapezoidal

  - platform: integration
    source: sensor.study_power
    name: Study Energy
    unit_prefix: k
    round: 2
    method: trapezoidal

  - platform: integration
    source: sensor.salon_power
    name: Salon Energy
    unit_prefix: k
    round: 2
    method: trapezoidal

  - platform: integration
    source: sensor.boorgat_power
    name: Boorgat Energy
    unit_prefix: k
    round: 2
    method: trapezoidal
#------------------------------------------------------------------------------------------------------------------------
# Monitor active connections
  - platform: command_line
    name: "Active Network Connections"
    command: "nmap -sn 192.168.1.1/24 | grep -c 'Host is up'"
    scan_interval: 300
    unit_of_measurement: "devices"
    
  - platform: command_line
    name: "Network Device Count"
    command: "arp -a | wc -l"
    scan_interval: 300
    unit_of_measurement: "devices"
    
  - platform: command_line
    name: "Network Latency to Gateway"
    command: "ping -c 1 192.168.1.1 | grep 'time=' | awk -F'time=' '{print $2}' | awk '{print $1}'"
    unit_of_measurement: "ms"
    scan_interval: 60
    
  - platform: command_line
    name: "DNS Resolution Time"
    command: "dig @8.8.8.8 google.com | grep 'Query time:' | awk '{print $4}'"
    unit_of_measurement: "ms"
    scan_interval: 300
#------------------------------------------------------------------------------------------------------------------------    
# Netgear Switch SNMP Monitoring
  # Test basic SNMP connectivity to the switch
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.1.1.0
    name: "Switch System Info"
    scan_interval: 60
    
  # Test interface count
  - platform: snmp  
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.1.0
    name: "Switch Interface Count"
    scan_interval: 300
    
 # Test uptime
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.1.3.0
    name: "Switch Uptime"
    unit_of_measurement: "ticks"
    scan_interval: 300    
#------------------------------------------------------------------------------------------------------------------------    
# Port Discovery - Add to your packages/sensor.yaml
  # Port 1 link status (we'll expand this based on active ports)
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.8.1  # Port 1 operational status
    name: "Switch Port 1 Status"
    scan_interval: 60
    
  # Port 1 speed
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.5.1  # Port 1 speed
    name: "Switch Port 1 Speed"
    unit_of_measurement: "bps"
    scan_interval: 300
    
  # Test a few more ports to see which are active
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.8.2  # Port 2 status
    name: "Switch Port 2 Status"
    scan_interval: 60
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.8.3  # Port 3 status  
    name: "Switch Port 3 Status"
    scan_interval: 60
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.8.4  # Port 4 status
    name: "Switch Port 4 Status"
    scan_interval: 60
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.8.5  # Port 4 status
    name: "Switch Port 5 Status"
    scan_interval: 60
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.8.6  # Port 4 status
    name: "Switch Port 6 Status"
    scan_interval: 60
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.8.7  # Port 4 status
    name: "Switch Port 7 Status"
    scan_interval: 60
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.8.8  # Port 4 status
    name: "Switch Port 8 Status"
    scan_interval: 60
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.8.9  # Port 4 status
    name: "Switch Port 9 Status"
    scan_interval: 60
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.8.10  # Port 4 status
    name: "Switch Port 10 Status"
    scan_interval: 60
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.8.11  # Port 4 status
    name: "Switch Port 11 Status"
    scan_interval: 60    

  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.8.12  # Port 4 status
    name: "Switch Port 12 Status"
    scan_interval: 60    
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.8.13  # Port 4 status
    name: "Switch Port 13 Status"
    scan_interval: 60    
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.8.14  # Port 4 status
    name: "Switch Port 14 Status"
    scan_interval: 60    
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.8.15  # Port 4 status
    name: "Switch Port 15 Status"
    scan_interval: 60    

  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.8.16  # Port 4 status
    name: "Switch Port 16 Status"
    scan_interval: 60    
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.8.17  # Port 4 status
    name: "Switch Port 17 Status"
    scan_interval: 60    
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.8.18  # Port 4 status
    name: "Switch Port 18 Status"
    scan_interval: 60    
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.8.19  # Port 4 status
    name: "Switch Port 19 Status"
    scan_interval: 60    
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.8.20  # Port 4 status
    name: "Switch Port 20 Status"
    scan_interval: 60    
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.8.21  # Port 4 status
    name: "Switch Port 21 Status"
    scan_interval: 60    
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.8.22  # Port 4 status
    name: "Switch Port 22 Status"
    scan_interval: 60    
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.8.23  # Port 4 status
    name: "Switch Port 23 Status"
    scan_interval: 60    
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.8.24  # Port 4 status
    name: "Switch Port 24 Status"
    scan_interval: 60        

# Add this to see all port statuses at once
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.8  # All port statuses
    name: "Switch All Port Status"
    scan_interval: 60    
    
    
# Netgear GS728TP - All 24 Port Monitoring
  # Ports 1-8 Bandwidth Monitoring
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.10.1
    name: "Switch Port 1 Bytes In"
    unit_of_measurement: "bytes"
    scan_interval: 30
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.16.1
    name: "Switch Port 1 Bytes Out"
    unit_of_measurement: "bytes"
    scan_interval: 30
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.10.2
    name: "Switch Port 2 Bytes In"
    unit_of_measurement: "bytes"
    scan_interval: 30
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.16.2
    name: "Switch Port 2 Bytes Out"
    unit_of_measurement: "bytes"
    scan_interval: 30
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.10.3
    name: "Switch Port 3 Bytes In"
    unit_of_measurement: "bytes"
    scan_interval: 30
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.2.1.16.3
    name: "Switch Port 3 Bytes Out"
    unit_of_measurement: "bytes"
    scan_interval: 30
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.10.4
    name: "Switch Port 4 Bytes In"
    unit_of_measurement: "bytes"
    scan_interval: 30
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.16.4
    name: "Switch Port 4 Bytes Out"
    unit_of_measurement: "bytes"
    scan_interval: 30
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.10.5
    name: "Switch Port 5 Bytes In"
    unit_of_measurement: "bytes"
    scan_interval: 30
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.16.5
    name: "Switch Port 5 Bytes Out"
    unit_of_measurement: "bytes"
    scan_interval: 30
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.10.6
    name: "Switch Port 6 Bytes In"
    unit_of_measurement: "bytes"
    scan_interval: 30
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.16.6
    name: "Switch Port 6 Bytes Out"
    unit_of_measurement: "bytes"
    scan_interval: 30
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.10.7
    name: "Switch Port 7 Bytes In"
    unit_of_measurement: "bytes"
    scan_interval: 30
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.16.7
    name: "Switch Port 7 Bytes Out"
    unit_of_measurement: "bytes"
    scan_interval: 30
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.10.8
    name: "Switch Port 8 Bytes In"
    unit_of_measurement: "bytes"
    scan_interval: 30
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.16.8
    name: "Switch Port 8 Bytes Out"
    unit_of_measurement: "bytes"
    scan_interval: 30

  # Ports 9-16
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.10.9
    name: "Switch Port 9 Bytes In"
    unit_of_measurement: "bytes"
    scan_interval: 30
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.16.9
    name: "Switch Port 9 Bytes Out"
    unit_of_measurement: "bytes"
    scan_interval: 30
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.10.10
    name: "Switch Port 10 Bytes In"
    unit_of_measurement: "bytes"
    scan_interval: 30
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.16.10
    name: "Switch Port 10 Bytes Out"
    unit_of_measurement: "bytes"
    scan_interval: 30
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.10.11
    name: "Switch Port 11 Bytes In"
    unit_of_measurement: "bytes"
    scan_interval: 30
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.16.11
    name: "Switch Port 11 Bytes Out"
    unit_of_measurement: "bytes"
    scan_interval: 30
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.10.12
    name: "Switch Port 12 Bytes In"
    unit_of_measurement: "bytes"
    scan_interval: 30
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.16.12
    name: "Switch Port 12 Bytes Out"
    unit_of_measurement: "bytes"
    scan_interval: 30
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.10.13
    name: "Switch Port 13 Bytes In"
    unit_of_measurement: "bytes"
    scan_interval: 30
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.16.13
    name: "Switch Port 13 Bytes Out"
    unit_of_measurement: "bytes"
    scan_interval: 30
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.10.14
    name: "Switch Port 14 Bytes In"
    unit_of_measurement: "bytes"
    scan_interval: 30
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.16.14
    name: "Switch Port 14 Bytes Out"
    unit_of_measurement: "bytes"
    scan_interval: 30
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.10.15
    name: "Switch Port 15 Bytes In"
    unit_of_measurement: "bytes"
    scan_interval: 30
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.16.15
    name: "Switch Port 15 Bytes Out"
    unit_of_measurement: "bytes"
    scan_interval: 30
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.10.16
    name: "Switch Port 16 Bytes In"
    unit_of_measurement: "bytes"
    scan_interval: 30
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.16.16
    name: "Switch Port 16 Bytes Out"
    unit_of_measurement: "bytes"
    scan_interval: 30

  # Ports 17-24
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.10.17
    name: "Switch Port 17 Bytes In"
    unit_of_measurement: "bytes"
    scan_interval: 30
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.16.17
    name: "Switch Port 17 Bytes Out"
    unit_of_measurement: "bytes"
    scan_interval: 30
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.10.18
    name: "Switch Port 18 Bytes In"
    unit_of_measurement: "bytes"
    scan_interval: 30
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.16.18
    name: "Switch Port 18 Bytes Out"
    unit_of_measurement: "bytes"
    scan_interval: 30
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.10.19
    name: "Switch Port 19 Bytes In"
    unit_of_measurement: "bytes"
    scan_interval: 30
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.16.19
    name: "Switch Port 19 Bytes Out"
    unit_of_measurement: "bytes"
    scan_interval: 30
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.10.20
    name: "Switch Port 20 Bytes In"
    unit_of_measurement: "bytes"
    scan_interval: 30
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.16.20
    name: "Switch Port 20 Bytes Out"
    unit_of_measurement: "bytes"
    scan_interval: 30
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.10.21
    name: "Switch Port 21 Bytes In"
    unit_of_measurement: "bytes"
    scan_interval: 30
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.16.21
    name: "Switch Port 21 Bytes Out"
    unit_of_measurement: "bytes"
    scan_interval: 30
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.10.22
    name: "Switch Port 22 Bytes In"
    unit_of_measurement: "bytes"
    scan_interval: 30
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.16.22
    name: "Switch Port 22 Bytes Out"
    unit_of_measurement: "bytes"
    scan_interval: 30
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.10.23
    name: "Switch Port 23 Bytes In"
    unit_of_measurement: "bytes"
    scan_interval: 30
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.16.23
    name: "Switch Port 23 Bytes Out"
    unit_of_measurement: "bytes"
    scan_interval: 30
    
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.10.24
    name: "Switch Port 24 Bytes In"
    unit_of_measurement: "bytes"
    scan_interval: 30
  - platform: snmp
    host: 192.168.1.9
    community: public
    baseoid: 1.3.6.1.2.1.2.2.1.16.24
    name: "Switch Port 24 Bytes Out"
    unit_of_measurement: "bytes"
    scan_interval: 30

#------------------------------------------------------------------------------------------------------------------------    
# Network Changes
# Added by claude.ai on 4 Aug 2025
binary_sensor:
  - platform: template
    sensors:
      network_congestion:
        friendly_name: "Network Congestion Detected"
        value_template: >
          {% set current_speed = states('sensor.speedtest_download') | float(0) %}
          {% set threshold = current_speed * 0.7 %}
          {{ current_speed > 0 and current_speed < threshold }}
        availability_template: >
          {{ has_value('sensor.speedtest_download') }}
        icon_template: >
          {% if is_state('binary_sensor.network_congestion', 'on') %}
            mdi:network-strength-1
          {% else %}
            mdi:network-strength-4
          {% endif %}
#------------------------------------------------------------------------------------------------------------------------
# Network Device Ping Monitoring - MISSING ENTITIES
# Added to fix automation issues - Created by Claude.ai on 05 August 2025
#------------------------------------------------------------------------------------------------------------------------
  - platform: template
    sensors:
      network_congestion:
        friendly_name: "Network Congestion Detected"
        value_template: >
          {{ states('sensor.speedtest_download') | float < 
             (states('sensor.speedtest_download') | float * 0.7) }}
        icon_template: >
          {% if is_state('binary_sensor.network_congestion', 'on') %}
            mdi:network-strength-1
          {% else %}
            mdi:network-strength-4
          {% endif %}